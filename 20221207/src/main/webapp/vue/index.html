<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¶Vue.js ì• ì™„ìš©í’ˆìƒµğŸƒâ€â™€ï¸ğŸ’•ğŸ’¨</title>
    <script src="https://unpkg.com/vue@2"></script>
    <link rel="stylesheet" type="text/css" href="assets/css/app.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
        integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.16.2/axios.js"></script>

    <style>
        @font-face {
            font-family: 'NanumSquareNeo-Variable';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_11-01@1.0/NanumSquareNeo-Variable.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
        }

        * {
            font-family: NanumSquareNeo-Variable;
        }
    </style>
</head>

<body>
    <div id="app">
        <!--âœ… ì‚¬ì´íŠ¸ ì„¤ëª…-->
        <header>
            <div class="navbar navbar-default">
                <div class="navbar-header">
                    <h1>{{sitename}}</h1>
                </div>
                <div class="nav navbar-nav navbar-right cart">
                    <button class="btn btn-primary.btn-lg" v-on:click="showCheckout"><span
                            class="glyphicon glyphicon-shopping-cart">
                            {{cartItemCount}}</span>
                        <span>ì²´í¬ì•„ì›ƒ</span></button>
                </div>
            </div>

            <div class="nav navbar-nav navbar-right">
                <label>ìƒí’ˆë²ˆí˜¸ìˆœ
                    <input type="radio" v-model="radioOrder" v-bind:value="'id'">
                </label>
                <label>ìƒí’ˆëª…ìˆœ
                    <input type="radio" v-model="radioOrder" v-bind:value="'title'">
                </label>
                <label>ìµœì €ê°€ìˆœ
                    <input type="radio" v-model="radioOrder" v-bind:value="'price'">
                </label>
            </div>
            <!-- <div class="nav navbar-nav navbar-right" v-for="radioCase in radioOrderCase">
                <label v-bind:for="radioCase"><input type="radio" v-bind:value="radioCase"
                        v-model="radioOrder">{{radioCase}}ìˆœ
                </label>
            </div> -->

        </header>

        <main>
            <div v-if="showProduct">
                <div v-for="product in products">
                    <div class="row">
                        <!--âœ… ì²´í¬ì¸ ì‹œ ë³´ì´ëŠ” í™”ë©´-->
                        <!--ğŸ“Œv-for ìƒí’ˆëª©ë¡ ì¶œë ¥-->
                        <div class="col-md-2 col-md-offset-1">
                            <figure>
                                <!--ğŸ“v-bind : ì†ì„± ë¶€ì—¬ // src, value ë“±ë“±-->
                                <img class="product" v-bind:src="product.image">
                            </figure>
                        </div>
                        <div class="col-md-6 col-md-offset-2 description">
                            <h1 v-text="product.title"></h1>
                            <p v-html="product.description"></p>
                            <p v-text="product.id"></p>

                            <!--ğŸ“filter ì†ì„± formatPrice ì§€ì •-->
                            <p class="price">
                                {{product.price | formatPrice}}</p>
                            <!--ğŸ“v-on: ì´ë²¤íŠ¸ ë¶€ì—¬-->
                            <button class="btn btn-primary.btn-lg" v-if="canAddToCart(product)"
                                v-on:click="addToCart(product)">ì¥ë°”êµ¬ë‹ˆë‹´ê¸°</button>
                            <button class="btn btn-primary.btn-lg" disabled="true" v-else>ì¥ë°”êµ¬ë‹ˆë‹´ê¸°</button>
                            <span class="inventory-message"
                                v-if="product.availableInventory == cartCount(product.id)">ğŸ‘»í’ˆì ˆ</span>
                            <span class="inventory-message"
                                v-else-if="product.availableInventory - cartCount(product.id) < 3 ">[í’ˆì ˆì„ë°•]
                                ì¬ê³ :{{product.availableInventory - cartCount(product.id)}}ê°œ</span>
                            <span class="inventory-message" v-else>ì§€ê¸ˆ êµ¬ë§¤í•˜ì„¸ìš”!</span>

                            <!--ğŸ“Œë³„ í‰ì  n: ë°˜ë³µë¬¸(for)ì˜ n, product.rating : í‰ì  ìˆ«ì(products.jsonì— ìˆìŒ)-->
                            <div class="rating">
                                <span v-bind:class="{'rating-active':checkRating(n,product.rating)}"
                                    v-for="n in 5">ğŸ¤</span>
                            </div>
                        </div>
                    </div>
                    <!--rowë§ˆì§€ë§‰-->
                    <hr>
                </div>

                <!--v-forë§ˆì§€ë§‰-->
            </div>
            <!--v-if="showProduct"-->

            <!--âœ… ì²´í¬ì•„ì›ƒ ì‹œ ë³´ì´ëŠ” í™”ë©´-->
            <div v-else>
                <div class="col-md-10 col-md-offset-1">
                    <div class="panel panel-info">
                        <div class="panel-heading">ì²´í¬ì•„ì›ƒ</div>
                        <div class="panel-body">
                            <!---->
                            <div class="form-group">
                                <div class="col-md-12">
                                    <h4><strong>ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.</strong></h4>
                                </div>
                            </div>
                            <!--ì´ë¦„-->
                            <div class="form-group">
                                <div class="col-md-6">
                                    <strong>ì´ë¦„:</strong>
                                    <input v-model="order.firstName" class="form-control">
                                </div>
                            </div>
                            <!--ì„±-->
                            <div class="form-group">
                                <div class="col-md-6">
                                    <strong>ì„±:</strong>
                                    <input v-model="order.lastName" class="form-control">
                                </div>
                            </div>
                            <!--ì£¼ì†Œ-->
                            <div class="form-group">
                                <div class="col-md-12">
                                    <strong>ì£¼ì†Œ:</strong>
                                    <input v-model="order.address" class="form-control">
                                </div>
                            </div>
                            <!--ë„ì‹œ-->
                            <div class="form-group">
                                <div class="col-md-6">
                                    <strong>ë„ì‹œ:</strong>
                                    <input v-model="order.city" class="form-control">
                                </div>
                            </div>
                            <!--ì£¼(state)-->
                            <div class="form-group">
                                <div class="col-md-6">
                                    <strong>ì£¼:</strong>
                                    <select v-model="order.state" class="form-control">
                                        <option disabled>ì£¼</option>
                                        <option v-for="(state, key) in states" v-bind:value="state">{{key}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <!--ìš°í¸ë²ˆí˜¸-->
                            <div class="form-group">
                                <div class="col-md-6">
                                    <strong>ìš°í¸ë²ˆí˜¸:</strong>
                                    <!--.number ì§€ì • ì‹œ ìˆ«ìë§Œ ì‘ì„± ê°€ëŠ¥í•´ì§-->
                                    <input v-model.number="order.zip" class="form-control">
                                </div>
                            </div>
                            <!--ì„ ë¬¼ ì˜µì…˜-->
                            <div class="form-group">
                                <div class="col-md-6 boxes">
                                    <!--v-bind:true-value >> ê°’ì´ trueì¼ ê²½ìš° ë³´ì—¬ì£¼ëŠ” value-->
                                    <input type="checkbox" id="gift" value="true"
                                        v-bind:false-value="order.dontSendGift" v-bind:true-value="order.sendGift">
                                    <label for="gift">ì„ ë¬¼ë¡œ ë³´ë‚´ê¸° ì—¬ë¶€ </label>
                                    <!--.number ì§€ì • ì‹œ ìˆ«ìë§Œ ì‘ì„± ê°€ëŠ¥í•´ì§-->
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 boxes">
                                    <input type="radio" id="home" v-bind:value="order.home" v-model="order.method">
                                    <label for="home">ìíƒ</label>

                                    <input type="radio" id="business" v-bind:value="order.business"
                                        v-model="order.method">
                                    <label for="business">ì§ì¥</label>
                                </div>
                            </div>
                            <!--ì •ë³´ì§‘ê³„-->
                            <div class="col-md-12 verifity">
                                <pre>
                                    ì´ë¦„: {{order.firstName}}
                                    ì„±: {{order.lastName}}
                                    ì£¼ì†Œ: {{order.address}}
                                    ë„ì‹œ: {{order.city}}
                                    ìš°í¸ë²ˆí˜¸: {{order.zip}}
                                    ë°°ì†¡ì§€: {{order.method}}
                                    ì„ ë¬¼: {{order.gift}}
                                </pre>
                            </div>
                            <!--ì œì¶œ-->
                            <div class="form-group">
                                <div class="col-md-6">
                                    <button type="submit" class="btn btn-primary submit"
                                        v-on:click="submitForm">ì£¼ë¬¸í•˜ê¸°</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </div>
    </main>
    </div>

    <script>
        var APP_LOG_LIFECYCLE_EVENTS = false;

        //âœ… Vue ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
        var vm = new Vue({
            el: '#app',
            data: {
                sitename: 'ğŸ¦”Vue.js ì• ì™„ìš©í’ˆìƒµğŸƒâ€â™€ï¸ğŸ’•ğŸ’¨',
                //ğŸ“Œ ìƒí’ˆì •ë³´ ë‹´ëŠ” ê°ì²´ product ì„ ì–¸
                // product: {
                //     id: 1001,
                //     title: 'ğŸ±ì˜í¬ ì‚¬ë£Œ, 25íŒŒìš´ë“œğŸ¾',
                //     description: 'ì˜í¬ë¥¼ ìœ„í•œ <em>ê±°ë¶€í•  ìˆ˜ ì—†ëŠ”</em> ìœ ê¸°ë† 25íŒŒìš´ë“œ ì‚¬ë£Œì…ë‹ˆë‹¤.',
                //     price: 1234567, // == $20.00,
                //     image: 'assets/images/product-fullsize.png',
                //     //ğŸ“ ë‹´ì„ ìˆ˜ ìˆëŠ” ì¥ë°”êµ¬ë‹ˆ ê°œìˆ˜
                //     availableInventory: 5
                // },
                products: [],
                cart: [],
                showProduct: true, //true-false ë°”ê¾¸ë©´ì„œ í™”ë©´ ë³´ì—¬ì¤Œ,
                states: {
                    AL: 'ì•Œë¼ë°”ë§ˆ',
                    AK: 'ì•Œë˜ìŠ¤ì¹´',
                    AR: 'ì• ë¦¬ì¡°ë‚˜',
                    CA: 'ìº˜ë¦¬í¬ë‹ˆì•„',
                    NV: 'ë„¤ë°”ë‹¤'
                },
                order: {
                    firstName: '',
                    lastName: '',
                    address: '',
                    city: '',
                    zip: '',
                    state: '',
                    method: 'ìíƒì£¼ì†Œ',
                    business: 'ì§ì¥ì£¼ì†Œ',
                    home: 'ìíƒì£¼ì†Œ',
                    gift: 'ì„ ë¬¼ë¡œ ë³´ë‚´ê¸°',
                    sendGift: 'ì„ ë¬¼ë¡œ ë³´ë‚´ê¸°',
                    dontsendGift: 'ì„ ë¬¼ë¡œ ë³´ë‚´ì§€ ì•Šê¸°'
                },
                radioOrder: 'no',
                radioOrderCase: ['id', 'title', 'price']
            },
            methods: {
                addToCart: function (aProduct) {
                    this.cart.push(aProduct.id);
                },
                //
                showCheckout: function () {
                    //trueë©´ falseë¡œ ë°”ê¿”ì£¼ê³ , falseë©´ trueë¡œ ë°”ê¿”ì¤Œ
                    this.showProduct = this.showProduct ? false : true;
                },
                submitForm: function () {
                    alert('ì œì¶œì™„ë£Œ!')
                },
                cartCount: function (id) {
                    var count = 0;
                    for (let i = 0; i < this.cart.length; i++) {
                        //cartì— ë‹´ê¸´ idì™€ ìƒí’ˆidê°€ ë™ì¼í•˜ë©´ count!
                        if (this.cart[i] == id) {
                            count++;
                        }
                    }
                    return count;
                },
                //ì¥ë°”êµ¬ë‹ˆì— ì¬ê³ ë§Œí¼ë§Œ ë‹´ì„ ìˆ˜ ìˆê²Œ ì„¤ì •
                canAddToCart: function (aProduct) {
                    return aProduct.availableInventory > this.cartCount(aProduct.id);
                },
                checkRating: function (n, rating) {
                    return rating >= n;
                }
            },
            //cartëŠ” ë°°ì—´ì´ë¯€ë¡œ length ì‚¬ìš©í•˜ë©´ ì¥ë°”êµ¬ë‹ˆì— ë‹´ê¸´ ê°œìˆ˜ ì…€ ìˆ˜ ìˆìŒ
            //computedëŠ” ì†ì„±ì´ë¯€ë¡œ functionì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ
            computed: {
                //ğŸ“Œì¥ë°”êµ¬ë‹ˆ ê°œìˆ˜ ê³„ì‚°
                cartItemCount: function () {
                    //ì‚¼í•­ì—°ì‚°ì true ë°˜í™˜ ê°’ ? true ì¡°ê±´ : false ë°˜í™˜ ê°’
                    return this.cart.length ? this.cart.length : 0
                }
            },
            /*ğŸ“Œ filter â–¶ data ì˜ì—­ ë°–ì— ì ì–´ì•¼í•¨
                                        â–¶ $20.00 => $23,456.00
                            */
            filters: {
                formatPrice: function (price) {
                    //ğŸ“99999ë³´ë‹¤ í° ê°’ì€
                    if (price > 99999) {
                        //ë¬¸ìì—´ë¡œ ë°”ê¾¸ê³ ë‚˜ì„œ ë’¤ì—ì„œë¶€í„° ìë¥´ê¸°
                        var priceStr = (price / 100).toFixed(2);
                        //split ë¬¸ìë¥¼ ë°°ì—´ë¡œ ë§Œë“¤ì–´ì¤Œ
                        var priceAry = priceStr.split('').reverse();
                        // console.log(priceAry);

                        //ì†Œìˆ˜ì  ê³„ì‚°í•˜ê¸° ìœ„í•œ ìš©ë„ index //2,000.00
                        //3+3ë³´ë‹¤ í¬ë©´ , ë„£ì–´ì¤Œ
                        var index = 3;
                        while (priceAry.length > index + 3) {
                            priceAry.splice(index + 3, 0, ',');
                            index += 4;
                        }
                        //3+3ë³´ë‹¤ ì‘ìœ¼ë©´ ê·¸ëŒ€ë¡œ return
                        return '$' + priceAry.reverse().join('');
                    } else {
                        //ğŸ“ 99999ë³´ë‹¤ ì‘ì€ ê²½ìš° ì†Œìˆ˜ì  2ìë¦¬ê¹Œì§€ ê·¸ë ¤ì£¼ê³  return
                        return '$' + (price / 100).toFixed(2);
                    }
                }
            },
            watch: {
                radioOrder: function (arg) {
                    // console.log(this.products)
                    if (arg == 'id') {
                        this.products.sort(function (a, b) {
                            return a.id - b.id
                        })
                    } else if (arg == 'price') {
                        this.products.sort(function (a, b) {
                            return a.price - b.price
                        })
                    } else if (arg == 'title') {
                        this.products.sort(function (a, b) {
                            if (a.title < b.title) {
                                return -1
                            } else {
                                return 1
                            }
                        })
                    }
                }
            },
            beforeCreate: function () {
                if (APP_LOG_LIFECYCLE_EVENTS) {
                    console.log("beforeCreate");
                }
            },
            created: function () {
                if (APP_LOG_LIFECYCLE_EVENTS) {
                    console.log("created");
                }
                axios.get('./products.json')
                    .then(result => {
                        // console.log(result)
                        this.products = result.data.products;
                        // console.log(this.products[0])
                    })
            },
            beforeMount: function () {
                if (APP_LOG_LIFECYCLE_EVENTS) {
                    console.log("beforeMount");
                }
            },
            mounted: function () {
                if (APP_LOG_LIFECYCLE_EVENTS) {
                    console.log("mounted");
                }
            },
            beforeUpdate: function () {
                if (APP_LOG_LIFECYCLE_EVENTS) {
                    console.log("beforeUpdate");
                }
            },
            updated: function () {
                if (APP_LOG_LIFECYCLE_EVENTS) {
                    console.log("updated");
                }
            },
            beforeDestroy: function () {
                if (APP_LOG_LIFECYCLE_EVENTS) {
                    console.log("beforeDestroy ");
                }
            },
            destroyed: function () {
                if (APP_LOG_LIFECYCLE_EVENTS) {
                    console.log("destroyed");
                }
            }
        })

        // vm.sitename = 'ìƒˆë¡œìš´';
        // vm.$destroy(); //ğŸ“instanceì˜ ìƒëª…ì£¼ê¸°ê°€ ëì´ ë‚¬ìŒì„ ì•Œë ¤ì¤Œ
        // vm.sitename = 'ìƒˆë¡œìš´2'
    </script>
</body>

</html>