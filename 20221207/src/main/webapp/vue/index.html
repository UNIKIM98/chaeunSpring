<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üê∂Vue.js Ïï†ÏôÑÏö©ÌíàÏÉµüèÉ‚Äç‚ôÄÔ∏èüíïüí®</title>
    <script src="https://unpkg.com/vue@2"></script>
    <link rel="stylesheet" type="text/css" href="assets/css/app.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
        integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.16.2/axios.js"></script>

    <style>
        @font-face {
            font-family: 'NanumSquareNeo-Variable';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_11-01@1.0/NanumSquareNeo-Variable.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
        }

        * {
            font-family: NanumSquareNeo-Variable;
        }
    </style>
</head>

<body>
    <div id="app">
        <!--‚úÖ ÏÇ¨Ïù¥Ìä∏ ÏÑ§Î™Ö-->
        <header>
            <div class="navbar navbar-default">
                <div class="navbar-header">
                    <h1>{{sitename}}</h1>
                </div>
                <div class="nav navbar-nav navbar-right cart">
                    <button class="btn btn-primary.btn-lg" v-on:click="showCheckout"><span
                            class="glyphicon glyphicon-shopping-cart">
                            {{cartItemCount}}</span>
                        <span>Ï≤¥ÌÅ¨ÏïÑÏõÉ</span></button>
                </div>
            </div>

            <div class="nav navbar-nav navbar-right">
                <label>ÏÉÅÌíàÎ≤àÌò∏Ïàú
                    <input type="radio" v-model="radioOrder" v-bind:value="'id'">
                </label>
                <label>ÏÉÅÌíàÎ™ÖÏàú
                    <input type="radio" v-model="radioOrder" v-bind:value="'title'">
                </label>
                <label>ÏµúÏ†ÄÍ∞ÄÏàú
                    <input type="radio" v-model="radioOrder" v-bind:value="'price'">
                </label>
            </div>
            <!-- <div class="nav navbar-nav navbar-right" v-for="radioCase in radioOrderCase">
                <label v-bind:for="radioCase"><input type="radio" v-bind:value="radioCase"
                        v-model="radioOrder">{{radioCase}}Ïàú
                </label>
            </div> -->

        </header>

        <main>
            <div v-if="showProduct">
                <div v-for="product in products">
                    <div class="row">
                        <!--‚úÖ Ï≤¥ÌÅ¨Ïù∏ Ïãú Î≥¥Ïù¥Îäî ÌôîÎ©¥-->
                        <!--üìåv-for ÏÉÅÌíàÎ™©Î°ù Ï∂úÎ†•-->
                        <div class="col-md-2 col-md-offset-1">
                            <figure>
                                <!--üìçv-bind : ÏÜçÏÑ± Î∂ÄÏó¨ // src, value Îì±Îì±-->
                                <img class="product" v-bind:src="product.image">
                            </figure>
                        </div>
                        <div class="col-md-6 col-md-offset-2 description">
                            <h1 v-text="product.title"></h1>
                            <p v-html="product.description"></p>
                            <p v-text="product.id"></p>

                            <!--üìçfilter ÏÜçÏÑ± formatPrice ÏßÄÏ†ï-->
                            <p class="price">
                                {{product.price | formatPrice}}</p>
                            <!--üìçv-on: Ïù¥Î≤§Ìä∏ Î∂ÄÏó¨-->
                            <button class="btn btn-primary.btn-lg" v-if="canAddToCart(product)"
                                v-on:click="addToCart(product)">Ïû•Î∞îÍµ¨ÎãàÎã¥Í∏∞</button>
                            <button class="btn btn-primary.btn-lg" disabled="true" v-else>Ïû•Î∞îÍµ¨ÎãàÎã¥Í∏∞</button>
                            <span class="inventory-message"
                                v-if="product.availableInventory == cartCount(product.id)">üëªÌíàÏ†à</span>
                            <span class="inventory-message"
                                v-else-if="product.availableInventory - cartCount(product.id) < 3 ">[ÌíàÏ†àÏûÑÎ∞ï]
                                Ïû¨Í≥†:{{product.availableInventory - cartCount(product.id)}}Í∞ú</span>
                            <span class="inventory-message" v-else>ÏßÄÍ∏à Íµ¨Îß§ÌïòÏÑ∏Ïöî!</span>

                            <!--üìåÎ≥Ñ ÌèâÏ†ê n: Î∞òÎ≥µÎ¨∏(for)Ïùò n, product.rating : ÌèâÏ†ê Ïà´Ïûê(products.jsonÏóê ÏûàÏùå)-->
                            <div class="rating">
                                <span v-bind:class="{'rating-active':checkRating(n,product.rating)}"
                                    v-for="n in 5">ü§ç</span>
                            </div>
                        </div>
                    </div>
                    <!--rowÎßàÏßÄÎßâ-->
                    <hr>
                </div>

                <!--v-forÎßàÏßÄÎßâ-->
            </div>
            <!--v-if="showProduct"-->

            <!--‚úÖ Ï≤¥ÌÅ¨ÏïÑÏõÉ Ïãú Î≥¥Ïù¥Îäî ÌôîÎ©¥-->
            <div v-else>
                <div class="col-md-10 col-md-offset-1">
                    <div class="panel panel-info">
                        <div class="panel-heading">Ï≤¥ÌÅ¨ÏïÑÏõÉ</div>
                        <div class="panel-body">
                            <!---->
                            <div class="form-group">
                                <div class="col-md-12">
                                    <h4><strong>Ï†ïÎ≥¥Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî.</strong></h4>
                                </div>
                            </div>
                            <!--Ïù¥Î¶Ñ-->
                            <div class="form-group">
                                <div class="col-md-6">
                                    <strong>Ïù¥Î¶Ñ:</strong>
                                    <input v-model="order.firstName" class="form-control">
                                </div>
                            </div>
                            <!--ÏÑ±-->
                            <div class="form-group">
                                <div class="col-md-6">
                                    <strong>ÏÑ±:</strong>
                                    <input v-model="order.lastName" class="form-control">
                                </div>
                            </div>
                            <!--Ï£ºÏÜå-->
                            <div class="form-group">
                                <div class="col-md-12">
                                    <strong>Ï£ºÏÜå:</strong>
                                    <input v-model="order.address" class="form-control">
                                </div>
                            </div>
                            <!--ÎèÑÏãú-->
                            <div class="form-group">
                                <div class="col-md-6">
                                    <strong>ÎèÑÏãú:</strong>
                                    <input v-model="order.city" class="form-control">
                                </div>
                            </div>
                            <!--Ï£º(state)-->
                            <div class="form-group">
                                <div class="col-md-6">
                                    <strong>Ï£º:</strong>
                                    <select v-model="order.state" class="form-control">
                                        <option disabled>Ï£º</option>
                                        <option v-for="(state, key) in states" v-bind:value="state">{{key}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <!--Ïö∞Ìé∏Î≤àÌò∏-->
                            <div class="form-group">
                                <div class="col-md-6">
                                    <strong>Ïö∞Ìé∏Î≤àÌò∏:</strong>
                                    <!--.number ÏßÄÏ†ï Ïãú Ïà´ÏûêÎßå ÏûëÏÑ± Í∞ÄÎä•Ìï¥Ïßê-->
                                    <input v-model.number="order.zip" class="form-control">
                                </div>
                            </div>
                            <!--ÏÑ†Î¨º ÏòµÏÖò-->
                            <div class="form-group">
                                <div class="col-md-6 boxes">
                                    <!--v-bind:true-value >> Í∞íÏù¥ trueÏùº Í≤ΩÏö∞ Î≥¥Ïó¨Ï£ºÎäî value-->
                                    <input type="checkbox" id="gift" value="true"
                                        v-bind:false-value="order.dontSendGift" v-bind:true-value="order.sendGift">
                                    <label for="gift">ÏÑ†Î¨ºÎ°ú Î≥¥ÎÇ¥Í∏∞ Ïó¨Î∂Ä </label>
                                    <!--.number ÏßÄÏ†ï Ïãú Ïà´ÏûêÎßå ÏûëÏÑ± Í∞ÄÎä•Ìï¥Ïßê-->
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 boxes">
                                    <input type="radio" id="home" v-bind:value="order.home" v-model="order.method">
                                    <label for="home">ÏûêÌÉù</label>

                                    <input type="radio" id="business" v-bind:value="order.business"
                                        v-model="order.method">
                                    <label for="business">ÏßÅÏû•</label>
                                </div>
                            </div>
                            <!--Ï†ïÎ≥¥ÏßëÍ≥Ñ-->
                            <div class="col-md-12 verifity">
                                <pre>
                                    Ïù¥Î¶Ñ: {{order.firstName}}
                                    ÏÑ±: {{order.lastName}}
                                    Ï£ºÏÜå: {{order.address}}
                                    ÎèÑÏãú: {{order.city}}
                                    Ïö∞Ìé∏Î≤àÌò∏: {{order.zip}}
                                    Î∞∞ÏÜ°ÏßÄ: {{order.method}}
                                    ÏÑ†Î¨º: {{order.gift}}
                                </pre>
                            </div>
                            <!--Ï†úÏ∂ú-->
                            <div class="form-group">
                                <div class="col-md-6">
                                    <button type="submit" class="btn btn-primary submit"
                                        v-on:click="submitForm">Ï£ºÎ¨∏ÌïòÍ∏∞</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </div>
    </main>
    </div>

    <script>
        var APP_LOG_LIFECYCLE_EVENTS = false;

        //‚úÖ Vue Ïù∏Ïä§ÌÑ¥Ïä§ ÏÉùÏÑ±
        var vm = new Vue({
            el: '#app',
            data: {
                sitename: 'ü¶îVue.js Ïï†ÏôÑÏö©ÌíàÏÉµüèÉ‚Äç‚ôÄÔ∏èüíïüí®',
                //üìå ÏÉÅÌíàÏ†ïÎ≥¥ Îã¥Îäî Í∞ùÏ≤¥ product ÏÑ†Ïñ∏
                // product: {
                //     id: 1001,
                //     title: 'üê±ÏòÅÌù¨ ÏÇ¨Î£å, 25ÌååÏö¥Îìúüêæ',
                //     description: 'ÏòÅÌù¨Î•º ÏúÑÌïú <em>Í±∞Î∂ÄÌï† Ïàò ÏóÜÎäî</em> Ïú†Í∏∞ÎÜç 25ÌååÏö¥Îìú ÏÇ¨Î£åÏûÖÎãàÎã§.',
                //     price: 1234567, // == $20.00,
                //     image: 'assets/images/product-fullsize.png',
                //     //üìç Îã¥ÏùÑ Ïàò ÏûàÎäî Ïû•Î∞îÍµ¨Îãà Í∞úÏàò
                //     availableInventory: 5
                // },
                products: [],
                cart: [],
                showProduct: true, //true-false Î∞îÍæ∏Î©¥ÏÑú ÌôîÎ©¥ Î≥¥Ïó¨Ï§å,
                states: {
                    AL: 'ÏïåÎùºÎ∞îÎßà',
                    AK: 'ÏïåÎûòÏä§Ïπ¥',
                    AR: 'Ïï†Î¶¨Ï°∞ÎÇò',
                    CA: 'Ï∫òÎ¶¨Ìè¨ÎãàÏïÑ',
                    NV: 'ÎÑ§Î∞îÎã§'
                },
                order: {
                    firstName: '',
                    lastName: '',
                    address: '',
                    city: '',
                    zip: '',
                    state: '',
                    method: 'ÏûêÌÉùÏ£ºÏÜå',
                    business: 'ÏßÅÏû•Ï£ºÏÜå',
                    home: 'ÏûêÌÉùÏ£ºÏÜå',
                    gift: 'ÏÑ†Î¨ºÎ°ú Î≥¥ÎÇ¥Í∏∞',
                    sendGift: 'ÏÑ†Î¨ºÎ°ú Î≥¥ÎÇ¥Í∏∞',
                    dontsendGift: 'ÏÑ†Î¨ºÎ°ú Î≥¥ÎÇ¥ÏßÄ ÏïäÍ∏∞'
                },
                radioOrder: 'no',
                radioOrderCase: ['id', 'title', 'price']
            },
            methods: {
                addToCart: function (aProduct) {
                    this.cart.push(aProduct.id);
                },
                //
                showCheckout: function () {
                    //trueÎ©¥ falseÎ°ú Î∞îÍøîÏ£ºÍ≥†, falseÎ©¥ trueÎ°ú Î∞îÍøîÏ§å
                    this.showProduct = this.showProduct ? false : true;
                },
                submitForm: function () {
                    alert('Ï†úÏ∂úÏôÑÎ£å!')
                },
                cartCount: function (id) {
                    var count = 0;
                    for (let i = 0; i < this.cart.length; i++) {
                        //cartÏóê Îã¥Í∏¥ idÏôÄ ÏÉÅÌíàidÍ∞Ä ÎèôÏùºÌïòÎ©¥ count!
                        if (this.cart[i] == id) {
                            count++;
                        }
                    }
                    return count;
                },
                //Ïû•Î∞îÍµ¨ÎãàÏóê Ïû¨Í≥†ÎßåÌÅºÎßå Îã¥ÏùÑ Ïàò ÏûàÍ≤å ÏÑ§Ï†ï
                canAddToCart: function (aProduct) {
                    return aProduct.availableInventory > this.cartCount(aProduct.id);
                },
                checkRating: function (n, rating) {
                    return rating >= n;
                }
            },
            //cartÎäî Î∞∞Ïó¥Ïù¥ÎØÄÎ°ú length ÏÇ¨Ïö©ÌïòÎ©¥ Ïû•Î∞îÍµ¨ÎãàÏóê Îã¥Í∏¥ Í∞úÏàò ÏÖÄ Ïàò ÏûàÏùå
            //computedÎäî ÏÜçÏÑ±Ïù¥ÎØÄÎ°ú functionÏùÑ ÏÇ¨Ïö©Ìï† Ïàò ÏóÜÏùå
            computed: {
                //üìåÏû•Î∞îÍµ¨Îãà Í∞úÏàò Í≥ÑÏÇ∞
                cartItemCount: function () {
                    //ÏÇºÌï≠Ïó∞ÏÇ∞Ïûê true Î∞òÌôò Í∞í ? true Ï°∞Í±¥ : false Î∞òÌôò Í∞í
                    return this.cart.length ? this.cart.length : 0
                }
            },
            /*üìå filter ‚ñ∂ data ÏòÅÏó≠ Î∞ñÏóê Ï†ÅÏñ¥ÏïºÌï®
                                        ‚ñ∂ $20.00 => $23,456.00
                            */
            filters: {
                formatPrice: function (price) {
                    //üìç99999Î≥¥Îã§ ÌÅ∞ Í∞íÏùÄ
                    if (price > 99999) {
                        //Î¨∏ÏûêÏó¥Î°ú Î∞îÍæ∏Í≥†ÎÇòÏÑú Îí§ÏóêÏÑúÎ∂ÄÌÑ∞ ÏûêÎ•¥Í∏∞
                        var priceStr = (price / 100).toFixed(2);
                        //split Î¨∏ÏûêÎ•º Î∞∞Ïó¥Î°ú ÎßåÎì§Ïñ¥Ï§å
                        var priceAry = priceStr.split('').reverse();
                        // console.log(priceAry);

                        //ÏÜåÏàòÏ†ê Í≥ÑÏÇ∞ÌïòÍ∏∞ ÏúÑÌïú Ïö©ÎèÑ index //2,000.00
                        //3+3Î≥¥Îã§ ÌÅ¨Î©¥ , ÎÑ£Ïñ¥Ï§å
                        var index = 3;
                        while (priceAry.length > index + 3) {
                            priceAry.splice(index + 3, 0, ',');
                            index += 4;
                        }
                        //3+3Î≥¥Îã§ ÏûëÏúºÎ©¥ Í∑∏ÎåÄÎ°ú return
                        return '$' + priceAry.reverse().join('');
                    } else {
                        //üìç 99999Î≥¥Îã§ ÏûëÏùÄ Í≤ΩÏö∞ ÏÜåÏàòÏ†ê 2ÏûêÎ¶¨ÍπåÏßÄ Í∑∏Î†§Ï£ºÍ≥† return
                        return '$' + (price / 100).toFixed(2);
                    }
                }
            },
            watch: {
                radioOrder: function (arg) {
                    // console.log(this.products)
                    if (arg == 'id') {
                        this.products.sort(function (a, b) {
                            return a.id - b.id
                        })
                    } else if (arg == 'price') {
                        this.products.sort(function (a, b) {
                            return a.price - b.price
                        })
                    } else if (arg == 'title') {
                        this.products.sort(function (a, b) {
                            if (a.title < b.title) {
                                return -1
                            } else {
                                return 1
                            }
                        })
                    }
                }
            },
            beforeCreate: function () {
                if (APP_LOG_LIFECYCLE_EVENTS) {
                    console.log("beforeCreate");
                }
            },
            created: function () {
                if (APP_LOG_LIFECYCLE_EVENTS) {
                    console.log("created");
                }
                axios.get('./products.json')
                    .then(result => {
                        // console.log(result)
                        this.products = result.data.products;
                        // console.log(this.products[0])
                    })
            },
            beforeMount: function () {
                if (APP_LOG_LIFECYCLE_EVENTS) {
                    console.log("beforeMount");
                }
            },
            mounted: function () {
                if (APP_LOG_LIFECYCLE_EVENTS) {
                    console.log("mounted");
                }
            },
            beforeUpdate: function () {
                if (APP_LOG_LIFECYCLE_EVENTS) {
                    console.log("beforeUpdate");
                }
            },
            updated: function () {
                if (APP_LOG_LIFECYCLE_EVENTS) {
                    console.log("updated");
                }
            },
            beforeDestroy: function () {
                if (APP_LOG_LIFECYCLE_EVENTS) {
                    console.log("beforeDestroy ");
                }
            },
            destroyed: function () {
                if (APP_LOG_LIFECYCLE_EVENTS) {
                    console.log("destroyed");
                }
            }
        })

        // vm.sitename = 'ÏÉàÎ°úÏö¥';
        // vm.$destroy(); //üìçinstanceÏùò ÏÉùÎ™ÖÏ£ºÍ∏∞Í∞Ä ÎÅùÏù¥ ÎÇ¨ÏùåÏùÑ ÏïåÎ†§Ï§å
        // vm.sitename = 'ÏÉàÎ°úÏö¥2'
    </script>
</body>

</html>